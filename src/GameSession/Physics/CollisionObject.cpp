#include "stdafx.h"
#include "CollisionObject.h"

#include "GameSession/Manager/PhysicsManager.h"

//////////////////////////////////////////////////////////////////////////

namespace hvgs
{

//////////////////////////////////////////////////////////////////////////

ICollisionObject::ICollisionObject()
{
	CPhysicsManager::GetMutable().RegisterCollisionObject(this);
}

//////////////////////////////////////////////////////////////////////////

ICollisionObject::ICollisionObject(const ICollisionObject&)
{
	CPhysicsManager::GetMutable().RegisterCollisionObject(this);
}

//////////////////////////////////////////////////////////////////////////

ICollisionObject::ICollisionObject(ICollisionObject&&)
{
	CPhysicsManager::GetMutable().RegisterCollisionObject(this);
}

//////////////////////////////////////////////////////////////////////////

ICollisionObject& ICollisionObject::operator=(const ICollisionObject&)
{
	return *this;
}

//////////////////////////////////////////////////////////////////////////

ICollisionObject& ICollisionObject::operator=(ICollisionObject&&)
{
	return *this;
}

//////////////////////////////////////////////////////////////////////////

ICollisionObject::~ICollisionObject()
{
	CPhysicsManager::GetMutable().UnregisterCollisionObject(this);
}

//////////////////////////////////////////////////////////////////////////

inline bool ICollisionObject::IsEnabled() const
{
	return true;
}

//////////////////////////////////////////////////////////////////////////

hvmath::AABB ICollisionObject::GetAABB() const
{
	return { GetAABBOrigin(), GetAABBHalfs() };
}

//////////////////////////////////////////////////////////////////////////

} // hvgs
